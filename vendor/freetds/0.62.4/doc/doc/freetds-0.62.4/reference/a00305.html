<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Conversion</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>Conversion<br>
<small>
[<a class="el" href="a00311.html">LibTDS API</a>]</small>
</h1>\ 
<a href="#_details">More...</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="a44" doxytag="convert::CASE_ALL_CHAR"></a>
#define&nbsp;</td><td valign=bottom><b>CASE_ALL_CHAR</b>&nbsp;&nbsp;&nbsp;SYBCHAR: case SYBVARCHAR: case SYBTEXT: case XSYBCHAR: case XSYBVARCHAR</td></tr>
<tr><td nowrap align=right valign=top><a name="a45" doxytag="convert::CASE_ALL_BINARY"></a>
#define&nbsp;</td><td valign=bottom><b>CASE_ALL_BINARY</b>&nbsp;&nbsp;&nbsp;SYBBINARY: case SYBVARBINARY: case SYBIMAGE: case XSYBBINARY: case XSYBVARBINARY</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="a00305.html#a18">tds_get_conversion_type</a> (int srctype, int colsize)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Return type suitable for conversions (convert all nullable types to fixed type).</em> <a href="#a18"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>TDS_INT&nbsp;</td><td valign=bottom><a class="el" href="a00305.html#a36">tds_convert</a> (TDSCONTEXT *tds_ctx, int srctype, const TDS_CHAR *src, TDS_UINT srclen, int desttype, CONV_RESULT *cr)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">tds_convert convert a type to another.</em> <a href="#a36"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>TDS_INT&nbsp;</td><td valign=bottom><a class="el" href="a00305.html#a40">tds_get_null_type</a> (int srctype)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Get same type but nullable.</em> <a href="#a40"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>size_t&nbsp;</td><td valign=bottom><a class="el" href="a00305.html#a41">tds_strftime</a> (char *buf, size_t maxsize, const char *format, const <a class="el" href="a00185.html">TDSDATEREC</a> *dr)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">format a date string according to an "extended" strftime formatting definition.</em> <a href="#a41"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>unsigned char&nbsp;</td><td valign=bottom><a class="el" href="a00305.html#a42">tds_willconvert</a> (int srctype, int desttype)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Test if a conversion is possible.</em> <a href="#a42"></a><em></em><br><br></td></tr>
<tr><td nowrap align=right valign=top>TDS_INT&nbsp;</td><td valign=bottom><a class="el" href="a00305.html#a43">tds_datecrack</a> (TDS_INT datetype, const void *di, <a class="el" href="a00185.html">TDSDATEREC</a> *dr)</td></tr>
<tr><td>&nbsp;</td><td><em class="mdesc">Convert from db date format to a structured date format.</em> <a href="#a43"></a><em></em><br><br></td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="a0" doxytag="convert::tds_hex_digits"></a>
const char&nbsp;</td><td valign=bottom><b>tds_hex_digits</b> [16] = "0123456789abcdef"</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
\
<p>
<hr><h2>Function Documentation</h2>
<a name="a36" doxytag="convert.c::tds_convert"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TDS_INT tds_convert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TDSCONTEXT *&nbsp;</td>
          <td class="mdname" nowrap> <em>tds_ctx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>srctype</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const TDS_CHAR *&nbsp;</td>
          <td class="mdname" nowrap> <em>src</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>TDS_UINT&nbsp;</td>
          <td class="mdname" nowrap> <em>srclen</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>desttype</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>CONV_RESULT *&nbsp;</td>
          <td class="mdname" nowrap> <em>cr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
tds_convert convert a type to another.
<p>
If you convert to SYBDECIMAL/SYBNUMERIC you MUST initialize precision and scale of cr. Do not expect string to be zero terminated. Databases support zero inside string. Doing strlen on result may result on data loss or even core. Use memcpy to copy destination using length returned. This function do not handle NULL, srclen should be &gt;0, if not undefinited behaviour... <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>tds_ctx</em>&nbsp;</td><td>context (used in conversion to data and to return messages) </td></tr>
    <tr><td valign=top><em>srctype</em>&nbsp;</td><td>type of source </td></tr>
    <tr><td valign=top><em>src</em>&nbsp;</td><td>pointer to source data to convert </td></tr>
    <tr><td valign=top><em>srclen</em>&nbsp;</td><td>length in bytes of source (not counting terminator or strings) </td></tr>
    <tr><td valign=top><em>desttype</em>&nbsp;</td><td>type of destination </td></tr>
    <tr><td valign=top><em>cr</em>&nbsp;</td><td>structure to hold result </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>length of result or TDS_CONVERT_* failure code on failure. All TDS_CONVERT_* constants are &lt;0. </dd></dl>
    </td>
  </tr>
</table>
<a name="a43" doxytag="convert.c::tds_datecrack"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TDS_INT tds_datecrack </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">TDS_INT&nbsp;</td>
          <td class="mdname" nowrap> <em>datetype</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>di</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="a00185.html">TDSDATEREC</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Convert from db date format to a structured date format.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>datetype</em>&nbsp;</td><td>source date type. SYBDATETIME or SYBDATETIME4 </td></tr>
    <tr><td valign=top><em>di</em>&nbsp;</td><td>source date </td></tr>
    <tr><td valign=top><em>dr</em>&nbsp;</td><td>destination date </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>TDS_FAIL or TDS_SUCCEED </dd></dl>
    </td>
  </tr>
</table>
<a name="a18" doxytag="convert.c::tds_get_conversion_type"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int tds_get_conversion_type </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>srctype</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>colsize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return type suitable for conversions (convert all nullable types to fixed type).
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>srctype</em>&nbsp;</td><td>type to convert </td></tr>
    <tr><td valign=top><em>colsize</em>&nbsp;</td><td>size of type </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>type for conversion </dd></dl>
    </td>
  </tr>
</table>
<a name="a40" doxytag="convert.c::tds_get_null_type"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TDS_INT tds_get_null_type </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>srctype</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get same type but nullable.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>srctype</em>&nbsp;</td><td>type requires </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nullable type </dd></dl>
    </td>
  </tr>
</table>
<a name="a41" doxytag="convert.c::tds_strftime"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> size_t tds_strftime </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>maxsize</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>format</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="a00185.html">TDSDATEREC</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
format a date string according to an "extended" strftime formatting definition.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>buf</em>&nbsp;</td><td>output buffer </td></tr>
    <tr><td valign=top><em>maxsize</em>&nbsp;</td><td>size of buffer in bytes (space include terminator) </td></tr>
    <tr><td valign=top><em>format</em>&nbsp;</td><td>format string similar to strftime. z for milliseconds </td></tr>
    <tr><td valign=top><em>dr</em>&nbsp;</td><td>date to convert </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>length of string returned, 0 for error </dd></dl>
    </td>
  </tr>
</table>
<a name="a42" doxytag="convert.c::tds_willconvert"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned char tds_willconvert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>srctype</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>desttype</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Test if a conversion is possible.
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>srctype</em>&nbsp;</td><td>source type </td></tr>
    <tr><td valign=top><em>desttype</em>&nbsp;</td><td>destination type </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if not convertible </dd></dl>
    </td>
  </tr>
</table>
<hr><address style="align: right;"><small>Generated on Sun Jun 13 18:55:27 2004 for FreeTDS API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3 </small></address>
</body>
</html>
