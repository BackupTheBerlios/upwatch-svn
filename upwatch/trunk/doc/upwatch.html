<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>Upwatch documentation</title><meta name="generator" content="DocBook XSL Stylesheets V1.50.0"><style type="text/css">
body { background-image: url(&quot;http://docbook.sourceforge.net/release/images/draft.png&quot;);
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark &quot;fixed&quot; on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
</style></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book"><div class="titlepage"><div><h1 class="title"><a name="upwatch"></a>Upwatch documentation</h1></div><div><div class="author"><h3 class="author">Ron Arts</h3></div></div><div><p class="copyright">Copyright © 2002 UpWatch BV, The Netherlands</p></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><a href="#id2756358">Preface</a></dt><dt>1. <a href="#id2805099">Installation</a></dt><dd><dl><dt>1.1. <a href="#Getting_upwatch">Getting upwatch</a></dt><dt>1.2. <a href="#Requirements">Requirements</a></dt><dd><dl><dt>1.2.1. <a href="#Run-time_requirements">Run-time requirements</a></dt><dt>1.2.2. <a href="#Build_requirements">Build requirements</a></dt></dl></dd><dt>1.3. <a href="#Compiling_upwatch">Compiling upwatch</a></dt><dt>1.4. <a href="#Actual_Installation">Actual Installation</a></dt><dt>1.5. <a href="#php_pages">PHP pages</a></dt><dt>1.6. <a href="#Security_considerations">Security considerations</a></dt><dt>1.7. <a href="#Database">Database</a></dt></dl></dd><dt>2. <a href="#Configuration">Configuration</a></dt><dd><dl><dt>2.1. <a href="#Probe_configuration">Probe configuration</a></dt><dt>2.2. <a href="#Database_configuration">Database configuration</a></dt></dl></dd><dt>3. <a href="#Administration">Administration</a></dt><dd><dl><dt>3.1. <a href="#logging">Logging</a></dt><dt>3.2. <a href="#managing_daemons">Managing daemons</a></dt><dt>3.3. <a href="#Queues">Queues</a></dt></dl></dd><dt>4. <a href="#How_it_all_works">How it all works</a></dt><dd><dl><dt>4.1. <a href="#General_Overview">General Overview</a></dt><dd><dl><dt>4.1.1. <a href="#upwatch_client">The Upwatch client</a></dt><dt>4.1.2. <a href="#upwatch_server">The Upwatch server</a></dt><dt>4.1.3. <a href="#upwatch_monitors">The Upwatch monitors</a></dt><dt>4.1.4. <a href="#upwatch_iptraf">Special programs</a></dt></dl></dd><dt>4.2. <a href="#Detailed_Description">A Detailed Description</a></dt><dd><dl><dt>4.2.1. <a href="#Database_Layout">Database Layout</a></dt><dt>4.2.2. <a href="#What_a_probe_does">What a probe does</a></dt><dt>4.2.3. <a href="#What_happens_to_the_probe_results">What happens to the probe results?</a></dt><dt>4.2.4. <a href="#uw_process_storing_results_in_the_database">uw_process: storing results in the database</a></dt></dl></dd><dt>4.3. <a href="#Scaling_up">Scaling up</a></dt></dl></dd><dt>A. <a href="#id2755043">Interfaces and file layouts</a></dt><dd><dl><dt>A.1. <a href="#Probe_result_file">Probe result file</a></dt><dd><dl><dt>A.1.1. <a href="#id2755072">Probe file name</a></dt><dt>A.1.2. <a href="#id2755113">Generic probe file layout</a></dt><dt>A.1.3. <a href="#uw_accept_protocol">uw_accept protocol</a></dt></dl></dd></dl></dd><dt>B. <a href="#Probe_specifications">Probe specifications</a></dt><dd><dl><dt>B.1. <a href="#bb">bb - Big Brother generic probe</a></dt><dd><dl><dt>B.1.1. <a href="#bb_result_layout">bb result record layout</a></dt><dt>B.1.2. <a href="#bb_database_layout">bb database layout</a></dt></dl></dd><dt>B.2. <a href="#bb_cpu">bb_cpu - Big Brother System probe</a></dt><dd><dl><dt>B.2.1. <a href="#bb_cpu_result_layout">bb_cpu result record layout</a></dt><dt>B.2.2. <a href="#bb_cpu_database_layout">bb_cpu database layout</a></dt></dl></dd><dt>B.3. <a href="#httpget">httpget - Do a HTTP GET request</a></dt><dd><dl><dt>B.3.1. <a href="#httpget_result_layout">httpget result record layout</a></dt><dt>B.3.2. <a href="#httpget_database_layout">httpget database layout</a></dt></dl></dd><dt>B.4. <a href="#imap">imap - Test a IMAP server, optionally with user/password</a></dt><dd><dl><dt>B.4.1. <a href="#imap_result_layout">imap result record layout</a></dt><dt>B.4.2. <a href="#imap_database_layout">imap database layout</a></dt></dl></dd><dt>B.5. <a href="#iptraf">iptraf - Incoming and outgoing traffic to an IP adddress, network or interface</a></dt><dd><dl><dt>B.5.1. <a href="#iptraf_result_layout">iptraf result record layout</a></dt><dt>B.5.2. <a href="#iptraf_database_layout">iptraf database layout</a></dt></dl></dd><dt>B.6. <a href="#mssql">mssql - Do a Microsoft SQL Server query</a></dt><dd><dl><dt>B.6.1. <a href="#mssql_result_layout">mssql result record layout</a></dt><dt>B.6.2. <a href="#mssql_database_layout">mssql database layout</a></dt></dl></dd><dt>B.7. <a href="#mysql">mysql - Do a MySQL query</a></dt><dd><dl><dt>B.7.1. <a href="#mysql_result_layout">mysql result record layout</a></dt><dt>B.7.2. <a href="#mysql_database_layout">mysql database layout</a></dt></dl></dd><dt>B.8. <a href="#ping">ping - send ICMP echo requests</a></dt><dd><dl><dt>B.8.1. <a href="#ping_result_layout">ping result record layout</a></dt><dt>B.8.2. <a href="#ping_database_layout">ping database layout</a></dt></dl></dd><dt>B.9. <a href="#pop3">pop3 - Test a POP3 server, optionally with user/password</a></dt><dd><dl><dt>B.9.1. <a href="#pop3_result_layout">pop3 result record layout</a></dt><dt>B.9.2. <a href="#pop3_database_layout">pop3 database layout</a></dt></dl></dd><dt>B.10. <a href="#postgresql">postgresql - Do a PostgreSQL query</a></dt><dd><dl><dt>B.10.1. <a href="#postgresql_result_layout">postgresql result record layout</a></dt><dt>B.10.2. <a href="#postgresql_database_layout">postgresql database layout</a></dt></dl></dd><dt>B.11. <a href="#snmpget">snmpget - Query an SNMP variable using an SNMP GET</a></dt><dd><dl><dt>B.11.1. <a href="#snmpget_result_layout">snmpget result record layout</a></dt><dt>B.11.2. <a href="#snmpget_database_layout">snmpget database layout</a></dt></dl></dd><dt>B.12. <a href="#sysstat">sysstat - System information like load average, CPU/MEM usage etc</a></dt><dd><dl><dt>B.12.1. <a href="#sysstat_result_layout">sysstat result record layout</a></dt><dt>B.12.2. <a href="#sysstat_database_layout">sysstat database layout</a></dt></dl></dd><dt>B.13. <a href="#errlog">errlog - System error log analysis</a></dt><dd><dl><dt>B.13.1. <a href="#errlog_result_layout">errlog result record layout</a></dt><dt>B.13.2. <a href="#errlog_database_layout">errlog database layout</a></dt></dl></dd><dt>B.14. <a href="#diskfree">diskfree - Free disk space</a></dt><dd><dl><dt>B.14.1. <a href="#diskfree_result_layout">diskfree result record layout</a></dt><dt>B.14.2. <a href="#diskfree_database_layout">diskfree database layout</a></dt></dl></dd></dl></dd><dt>C. <a href="#Adding_a_probe">Adding a probe</a></dt><dd><dl><dt>C.1. <a href="#So_you_want_to_add_a_probe">So you want to add a probe?</a></dt><dt>C.2. <a href="#Adding_probe_Basic_Steps">Basic steps for adding a probe</a></dt><dd><dl><dt>C.2.1. <a href="#Think_carefully_befire_you_start">Think carefully before you start</a></dt><dt>C.2.2. <a href="#Pick_a_name">Pick a real good name</a></dt><dt>C.2.3. <a href="#Design_the_database_fields">Design the Database Fields</a></dt><dt>C.2.4. <a href="#write_the_code">Write the code</a></dt><dt>C.2.5. <a href="#Write_the_uw_process_extension">Write the uw_process extension</a></dt><dt>C.2.6. <a href="#Add_PHP_pages_to_CMS">Add PHP pages_to_CMS</a></dt><dt>C.2.7. <a href="#Write_documentatrion">Write documentation</a></dt></dl></dd><dt>C.3. <a href="#Non_standard_probes">Non-standard Probes</a></dt></dl></dd><dt><a href="#id2756020">Index</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>bb attributes. <a href="#id2818876">bb attributes</a></dt><dt>bb elements. <a href="#id2820365">bb elements</a></dt><dt>bb definition record layout. <a href="#id2820613">bb definition record layout</a></dt><dt>bb result record layout. <a href="#id2821466">bb result record layout</a></dt><dt>bb_cpu attributes. <a href="#id2821969">bb_cpu attributes</a></dt><dt>bb_cpu elements. <a href="#id2822556">bb_cpu elements</a></dt><dt>bb_cpu definition record layout. <a href="#id2822805">bb_cpu definition record layout</a></dt><dt>bb_cpu result record layout. <a href="#id2823604">bb_cpu result record layout</a></dt><dt>httpget attributes. <a href="#id2820271">httpget attributes</a></dt><dt>httpget elements. <a href="#id2824911">httpget elements</a></dt><dt>httpget definition record layout. <a href="#id2825190">httpget definition record layout</a></dt><dt>httpget result record layout. <a href="#id2826098">httpget result record layout</a></dt><dt>imap attributes. <a href="#id2826822">imap attributes</a></dt><dt>imap elements. <a href="#id2827038">imap elements</a></dt><dt>imap definition record layout. <a href="#id2827317">imap definition record layout</a></dt><dt>imap result record layout. <a href="#id2828224">imap result record layout</a></dt><dt>iptraf attributes. <a href="#id2824681">iptraf attributes</a></dt><dt>iptraf elements. <a href="#id2829057">iptraf elements</a></dt><dt>iptraf definition record layout. <a href="#id2829336">iptraf definition record layout</a></dt><dt>iptraf result record layout. <a href="#id2830134">iptraf result record layout</a></dt><dt>mssql attributes. <a href="#id2828916">mssql attributes</a></dt><dt>mssql elements. <a href="#id2830965">mssql elements</a></dt><dt>mssql definition record layout. <a href="#id2831244">mssql definition record layout</a></dt><dt>mssql result record layout. <a href="#id2832261">mssql result record layout</a></dt><dt>mysql attributes. <a href="#id2830826">mysql attributes</a></dt><dt>mysql elements. <a href="#id2833092">mysql elements</a></dt><dt>mysql definition record layout. <a href="#id2833371">mysql definition record layout</a></dt><dt>mysql result record layout. <a href="#id2834388">mysql result record layout</a></dt><dt>ping attributes. <a href="#id2832957">ping attributes</a></dt><dt>ping elements. <a href="#id2835269">ping elements</a></dt><dt>ping definition record layout. <a href="#id2835548">ping definition record layout</a></dt><dt>ping result record layout. <a href="#id2836401">ping result record layout</a></dt><dt>pop3 attributes. <a href="#id2835004">pop3 attributes</a></dt><dt>pop3 elements. <a href="#id2837287">pop3 elements</a></dt><dt>pop3 definition record layout. <a href="#id2837566">pop3 definition record layout</a></dt><dt>pop3 result record layout. <a href="#id2838473">pop3 result record layout</a></dt><dt>postgresql attributes. <a href="#id2837148">postgresql attributes</a></dt><dt>postgresql elements. <a href="#id2839305">postgresql elements</a></dt><dt>postgresql definition record layout. <a href="#id2839584">postgresql definition record layout</a></dt><dt>postgresql result record layout. <a href="#id2840602">postgresql result record layout</a></dt><dt>snmpget attributes. <a href="#id2839167">snmpget attributes</a></dt><dt>snmpget elements. <a href="#id2841388">snmpget elements</a></dt><dt>snmpget definition record layout. <a href="#id2841666">snmpget definition record layout</a></dt><dt>snmpget result record layout. <a href="#id2842785">snmpget result record layout</a></dt><dt>sysstat attributes. <a href="#id2841296">sysstat attributes</a></dt><dt>sysstat elements. <a href="#id2844120">sysstat elements</a></dt><dt>sysstat definition record layout. <a href="#id2844399">sysstat definition record layout</a></dt><dt>sysstat result record layout. <a href="#id2845198">sysstat result record layout</a></dt><dt>errlog attributes. <a href="#id2846468">errlog attributes</a></dt><dt>errlog elements. <a href="#id2846638">errlog elements</a></dt><dt>errlog definition record layout. <a href="#id2846886">errlog definition record layout</a></dt><dt>errlog result record layout. <a href="#id2847685">errlog result record layout</a></dt><dt>diskfree attributes. <a href="#id2848188">diskfree attributes</a></dt><dt>diskfree elements. <a href="#id2848357">diskfree elements</a></dt><dt>diskfree definition record layout. <a href="#id2848606">diskfree definition record layout</a></dt><dt>diskfree result record layout. <a href="#id2849404">diskfree result record layout</a></dt></dl></div><div class="preface"><div class="titlepage"><div><h2 class="title"><a name="id2756358"></a>Preface</h2></div></div><p> People, especially managers, like to have facts and figures when taking decisions,
            either because a lot of money may be involved, or their job (or both). If you want to
            prove your website (or switch, or basically any other device) was available, showed the
            proper performance, or just want to know current and past CPU load, you've come to the
            right place.</p><p> UpWatch is very scalable (built for hundres of thousands of measurements per minute),
            fast, extensible, built on proven opensource tools, and tries
            very hard not to loose data.</p><p>Building and installing upwatch is not for the faint of heart. It uses lots of external
          libraries which may or may not be available on your platform. I myself use Redhat 8
          for development, and test compilation on RH7, and Yellowdog Linux 2.3.
       </p></div><div class="chapter"><div class="titlepage"><div><h2 class="title"><a name="id2805099"></a>Chapter 1. Installation</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>1.1. <a href="#Getting_upwatch">Getting upwatch</a></dt><dt>1.2. <a href="#Requirements">Requirements</a></dt><dd><dl><dt>1.2.1. <a href="#Run-time_requirements">Run-time requirements</a></dt><dt>1.2.2. <a href="#Build_requirements">Build requirements</a></dt></dl></dd><dt>1.3. <a href="#Compiling_upwatch">Compiling upwatch</a></dt><dt>1.4. <a href="#Actual_Installation">Actual Installation</a></dt><dt>1.5. <a href="#php_pages">PHP pages</a></dt><dt>1.6. <a href="#Security_considerations">Security considerations</a></dt><dt>1.7. <a href="#Database">Database</a></dt></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Getting_upwatch"></a>1.1. Getting upwatch</h2></div></div><p> Currently, upwatch is not released, and is not allowed to be distributed. The
          only way to get it, is through written permission of UpWatch BV.</p><p> If you aquired that, you will either receive access to CVS, or will receive a
            tar.gz file, or .RPM's.</p><p>Building and installing upwatch is not for the faint of heart. It uses lots of external
          libraries which may or may not be available on your platform. I myself use Redhat 8/9
          for development, and test compilation on RH7, SuSE8.2, Solaris, and Yellowdog Linux 2.3.
       </p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Requirements"></a>1.2. Requirements</h2></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Run-time_requirements"></a>1.2.1. Run-time requirements</h3></div></div><p>First ensure that the time/date on all hosts is correctly set. </p><p>Run time requirements differ per probe. Look in the corresponding .def file
                (or in the spec file for the probe), here's a list of everything we expect on a
                machine running all probes, and the database (I'll also list the version we use ourselves):</p><div class="itemizedlist"><ul type="disc"><li><p>glib2 &gt;= 2.0.4</p></li><li><p>xml2 (any version will do)</p></li><li><p>freetds &gt;= 0.6.0 compiled with --enable-threadsafe</p></li><li><p>mysql 3.23.49</p></li><li><p>postgreSQL 7.1.0</p></li><li><p>net-snmp 5.0.6</p></li><li><p>-lcrypto</p></li><li><p>libnet 1.0.2a (www.packetfactory.net/libnet/)</p></li><li><p>libpcap 0.6.2</p></li></ul></div><p>Delivered with upwatch are libstatgrab and the State Threads Library.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Build_requirements"></a>1.2.2. Build requirements</h3></div></div><p> Of course you can build the software yourself. Apart from the normal GNU
                compilation tools, and the development versions of the aforementioned packages,
                you'll need the following on your system to build upwatch:</p><div class="itemizedlist"><ul type="disc"><li><p>autogen 5.3.6 (autogen.sourceforge.net)</p></li><li><p>libxslt 1.0.15</p></li><li><p>docbook 1.48, including the entire toolchain: openjade, jadetex, tetex, netpbm, perl-SGMLSpm
                          </p></li><li><p>lynx 2.8.4</p></li><li><p>RPM tools, if you want to build RPM's</p></li></ul></div><p>If you run redhat, debian or SuSe, don't forget to install the devel packages
                if there are any.</p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Compiling_upwatch"></a>1.3. Compiling upwatch</h2></div></div><p>Just in case you really want to (or need to) compile upwatch yourself, it's
           pretty easy:
        </p><div class="literallayout"><p><br>
              $ tar xzvf upwatch-x.x.tar.gz<br>
              $ cd upwatch-x.x<br>
              $ ./configure<br>
              $ make<br>
           </p></div><p> Nothing to it... In case of problems, you're probably missing some library or
            header files, or they are in unexpected places. Look in config.log.</p><p>You can optionally specify --enable-monitors, --enable-iptraf and/or --enable-server to
         configure. Default configure only builds the client, docs, and utils.</p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Actual_Installation"></a>1.4. Actual Installation</h2></div></div><p> Before you install the software decide on the architecture. If you know in
            advance you'll have to monitor thousands of hosts, or the probes will exhaust your
            machine otherwise, you may have to split your installation across several machines.
            There may be more reasons to do that. Consult <a href="#Scaling_up" title="4.3. Scaling up">Scaling
            up</a> and <a href="#How_it_all_works" title="Chapter 4. How it all works">How it all works</a>
        </p><p> For simplicity we assume you run everything on the same host. In this case just
           install all rpm's on this host. What if you can't use RPM's? Then type the following
           command as root:
        </p><div class="literallayout"><p><br>
          $ make install<br>
        </p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="php_pages"></a>1.5. PHP pages</h2></div></div><p> The PHP pages can just be copied to any directory. There is an include directory. Copy
          that a some location ouside the web root, and enter its location in the .htaccess file in the web root dir.
          Also enter the database details in config.php.
       </p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Security_considerations"></a>1.6. Security considerations</h2></div></div><p> All upwatch directories are readable and writable by members of the group upwatch.
          Most all executables run as user upwatch.
          Some probes need root-access, most notable uw_ping, and they will be installed suid root.
          These probes drop root privileges wherever possible. Further you can assign each probe
          its own database user and grant that user access rights  to its own database tables.
          The probes itself don't write to the database, they only read from the
          <tt>pr_xxx_def</tt> tables.
       </p><p> The PHP web user should have SELECT, UPDATE, DELETE access to all tables.
       </p><p><b>uw_access</b>, and  <b>uw_accessbb</b> are
            the programs most vulnerable to crackers, as they wait
             for incoming connections on a TCP port (1985/1984). If possible, use <b>chroot</b> and
             firewall rules to limit connections to
             real probes only. Something similar holds for <b>mysql</b>. Most probes will want
             access, and passwords can be sniffed. For real security use ssh-tunnels.
       </p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Database"></a>1.7. Database</h2></div></div><p> First things first. Depending on the size of your installation you may
           run out of database or record space. It happened to me on the iptraf probe.
           I was measuring traffic for 4000 IP addresses and ran out of space after a month
           on the pr_iptraf_raw table - it hit the max_data_length limit. 
           I had to issue the following commands:
        </p><div class="literallayout"><p><br>
           $ mysql -u root --password=PASSWORD<br>
           mysql&gt; alter table pr_iptraf_raw max_rows = 1000000000;<br>
        </p></div><p>
           and this took almost two hours! So you better look at your own situation and
           adjust the settings MAX_ROWS and AVG_RECORD_SIZE accordingly for each table.
        </p><p> Create the database as follows. You DO have a root password set for mysql don't you?</p><div class="literallayout"><p><br>
           $ mysqladmin -u root --password=PASSWORD create upwatch<br>
           $ mysql -u root --password=PASSWORD &lt; upwatch.mysql<br>
        </p></div><p> Of course you need to assign users and GRANT them access. Note that mosts probes will
           want read access to their definition table. In many situations you can use just
           one user for that. Give that user access with:
        </p><div class="literallayout"><p><br>
           $ mysql -u root --PASSWORD=PASSWORD mysql<br>
           mysql&gt; GRANT SELECT ON upwatch.pr_ping_def TO user@'192.168.170.23' IDENTIFIED BY 'PASSWD'<br>
        </p></div></div></div><div class="chapter"><div class="titlepage"><div><h2 class="title"><a name="Configuration"></a>Chapter 2. Configuration</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>2.1. <a href="#Probe_configuration">Probe configuration</a></dt><dt>2.2. <a href="#Database_configuration">Database configuration</a></dt></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Probe_configuration"></a>2.1. Probe configuration</h2></div></div><p>
          Each probe first reads the general configuration file <tt>/etc/upwatch.conf</tt>
          and then its own configurationfile in <tt>/etc/upwatch.d</tt> if it exists.
          Normally some general things like the debug and logging level, and the database access
          are specified in the first file, and any probe-specific setting in the second file. You can also
          override settings from the generic file in the probe-specific file.
       </p><p> Each program has a manual page that documents options. Every long commandine option
          can also be entered in a configuration file.
       </p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Database_configuration"></a>2.2. Database configuration</h2></div></div><p>
       </p></div></div><div class="chapter"><div class="titlepage"><div><h2 class="title"><a name="Administration"></a>Chapter 3. Administration</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>3.1. <a href="#logging">Logging</a></dt><dt>3.2. <a href="#managing_daemons">Managing daemons</a></dt><dt>3.3. <a href="#Queues">Queues</a></dt></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="logging"></a>3.1. Logging</h2></div></div><p> The upwatch package contains various ways of logging errors. The
         standard way is to its own logfile <tt>/var/log/upwatch/upwatch.log</tt>.
         Other ways are logging to stderr (probably not practical) and to the syslog. Tweak the 
         <tt>debug</tt> to increase the amount of logging. Setting the debug level
         higher than 2 should only be used for debugging serious problems, for example it
         causes daemons to stay always in the foreground. In debuglevel 0 only errors are logged,
         in debuglevel 1 some progress information is logged.
       </p><p> The website has its own logfile in <tt>log/error.log</tt></p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="managing_daemons"></a>3.2. Managing daemons</h2></div></div><p> In most Linux distributions you can start/stop daemons using the scripts
         in <tt>/etc/init.d</tt>. Don't forget: you will miss sample data in the database
         if a probe is not running. You can watch what a probe is running if you run 
         <b>ps ax</b>.
       </p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Queues"></a>3.3. Queues</h2></div></div><p> Queues play an important part in upwatch. The queues are so-called <tt>maildir</tt>
       queues. This means that while the queuefile is written, it is written to a temporary directory, and when it's
       closed it is hardlinked to the actual queue directory. This way you can be absolutely sure that if you find
       a file in the queue, it is complete and nobody has the file open. Only one process reads from the
       queue and deletes the file when done. </p></div></div><div class="chapter"><div class="titlepage"><div><h2 class="title"><a name="How_it_all_works"></a>Chapter 4. How it all works</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>4.1. <a href="#General_Overview">General Overview</a></dt><dd><dl><dt>4.1.1. <a href="#upwatch_client">The Upwatch client</a></dt><dt>4.1.2. <a href="#upwatch_server">The Upwatch server</a></dt><dt>4.1.3. <a href="#upwatch_monitors">The Upwatch monitors</a></dt><dt>4.1.4. <a href="#upwatch_iptraf">Special programs</a></dt></dl></dd><dt>4.2. <a href="#Detailed_Description">A Detailed Description</a></dt><dd><dl><dt>4.2.1. <a href="#Database_Layout">Database Layout</a></dt><dt>4.2.2. <a href="#What_a_probe_does">What a probe does</a></dt><dt>4.2.3. <a href="#What_happens_to_the_probe_results">What happens to the probe results?</a></dt><dt>4.2.4. <a href="#uw_process_storing_results_in_the_database">uw_process: storing results in the database</a></dt></dl></dd><dt>4.3. <a href="#Scaling_up">Scaling up</a></dt></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="General_Overview"></a>4.1. General Overview</h2></div></div><p> The system primary function is to fill lots of database tables, to offer views on
            those tables, and to page operators in case things go wrong. To enable this upwatch
            consists of a MySQL database, lots of probe daemons (one daemon per probe, usually one probe
            per daemon), some supporting daemons, a PHP website, and other software, like SMS and mail interfaces.</p><p>The software can be divided into four parts:</p><div class="itemizedlist"><ul type="disc"><li><p>upwatch client - runs on a machine</p></li><li><p>server, accepts and processes results</p></li><li><p>monitors, contains software for remotely monitoring.</p></li><li><p>special software, like iptraf</p></li></ul></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="upwatch_client"></a>4.1.1. The Upwatch client</h3></div></div><p>The client consists of two programs: <tt>uw_sysstat</tt> and 
        <tt>uw_send</tt>. <tt>uw_sysstat</tt> every minute collects
         information like CPU load, disk I/O, swapping activity and so on, and writes it to an XML file
         in the spooldirectory. This directory is checked every 5 seconds, and all files appearing there
         are sent by uw_send to the central repository. <tt>uw_send</tt> has a 
         commandline option (--once) to let it be started by cronjobs, or for example when an ISDN
         connection has become online.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="upwatch_server"></a>4.1.2. The Upwatch server</h3></div></div><p>The server consists of three programs: <tt>uw_accept</tt>, 
        <tt>uw_setip</tt> and 
        <tt>uw_process</tt>. The monitoring results are accept by 
        <tt>uw_accept</tt> which listen on port 1985 (configurable), and drop 
        the XML results into the <tt>uw_process</tt> spool directory, where it
        is picked up, and stored into the database by <tt>uw_process</tt>.
        For compatibility with Big Brother (www.bb4.com) clients, there is an <tt>uw_acceptbb</tt>
        daemon, which listens on the Big Brother port (1984), and converts Big Brother messages into
        upwatch XML files. Lastly, , <tt>uw_setip</tt> listens to messages from the
        uw_tellip script, which should be started by clients whenever their IP address changes.
        </p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="upwatch_monitors"></a>4.1.3. The Upwatch monitors</h3></div></div><p>The monitors are daemons that run on some central monitoring server, and run checks
        on servers remotely, such as POP3, HTTP, SNMP or other services. Alll their results are
        sent by <tt>uw_send</tt>, as usual.
        </p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="upwatch_iptraf"></a>4.1.4. Special programs</h3></div></div><p>Their are special programs that don't fall into any other category, for example 
        <tt>uw_iptraf</tt>. This is a daemon that should run on a border gateway
        router, and that measures IP traffic on a per-IP basis.
        </p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Detailed_Description"></a>4.2. A Detailed Description</h2></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Database_Layout"></a>4.2.1. Database Layout</h3></div></div><p>Things start at the database. For every probe it contains the following tables:</p><div class="itemizedlist"><ul type="disc"><li><p>Definition table</p></li><li><p>Raw results table</p></li><li><p>Tables for compressed results per day, week, month, year and 5 year</p></li><li><p>A table with an overview of state changes</p></li></ul></div><p> The definition table contains, of course, the definition of this particular
            probe, this is of course probe specific but at a minimum it contains usually contains the target ip address.
            We'll see what the other tables are for later on.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="What_a_probe_does"></a>4.2.2. What a probe does</h3></div></div><p>There are actually three kinds of probes:
        </p><div class="itemizedlist"><ul type="disc"><li><p>Probes with database access, that measure a remote server</p></li><li><p>Probes without database access the measure remote servers</p></li><li><p>Probes without database access thatg measure localhost</p></li></ul></div><p>
	   Every probe performs a repetative task: measuring some specific function on a specific host.
           So first step is to know what to measure and on which host. For this it reads from the probe definition
           table, or from its configfile if it does not depend on database access It creates a local - in memory -
           copy of that table just in case the database becomes unreachable
           for a period of time. It routinely walks this list and performs its task. The result are written in XML format
           to a queue which is specified in the probe configuration (note: all queues normally reside in
          <tt>/var/spool/upwatch</tt>). After that the probe just waits for the next round.
       </p><p> Many probes have to do a lot of work. They are programmed to do this as efficient as possible.
          For example: the uw_ping probe is coded as a tight loop around a single select statement. This is the
          most efficient way (as far as I know) to ping thousands of hosts in, say, 20 seconds.
          Other probes use pools of threads (like <tt>httpget</tt>) or are build using the
          State Threads library.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="What_happens_to_the_probe_results"></a>4.2.3. What happens to the probe results?</h3></div></div><p>First, all results with status non-green are handed over to <tt>uw_examine</tt>, which tries to
           find out why the probe failed, and attaches a report to the probe. After this the results are put in
           the same queue as every other probe: <tt>uw_notify</tt>.
           <tt>uw_notify</tt> reads the result, looks at the probe status, and at previous statuses, and
           decides if someone should be notified by sms, email, or if it should be put into a high-priority queue.
        </p><p> The outgoing queue may be either the <tt>uw_process</tt> queue, or an
           <tt>uw_send</tt> queue, which is emptied by the uw_send process which sends
           all files to a remote queue on another host (received and queued by uw_accept).
        </p><p> <tt>uw_examine</tt> can do some additional tests like traceroute to the target host.
           It attaches this report
           to the probe result, and in its turn puts everything in an <tt>uw_process</tt> or
           <tt>uw_send</tt> queue.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="uw_process_storing_results_in_the_database"></a>4.2.4. uw_process: storing results in the database</h3></div></div><p> When the probe results arrive in the uw_process queue it is picked up by the workhorse
           of the lot, <tt>uw_process</tt>. It fills the result tables for the probes.</p><p> The raw results table contains just that, raw probe results.</p><p> Raw results are compressed into period tables in the following way (using week as
            an example): a week is divided into 100 equal timeslots. For computing the plot
            values for a slot the process reads all values from the day table in the same timeslot.
            These values are averaged and put in the week table. The same process happens for
            the month and year
            tables. This way we ensure that we never have to read more then 100 database records
            to produce a graph for a day, week, month, year or 5-year period.
        </p><p> Status changes are logged in a 'current status' table and in a status history (pr_hist). These
          two accomodate for easy retrieval by the webpages.</p><p>The pseudo-code below shows an example of how uw_process takes a probe result
          and puts this result in the database. as an example I'll take a pop3 result (class = 5, and our example
          probe has id 25)</p><p>
      </p><div class="literallayout"><p><br>
         IF PROBEDEFINITION NOT IN THE CACHE OR IT'S TOO OLD<br>
            select server, color, stattime, yellow, red from pr_status where  class = '8' and probe = '25'&quot;<br>
            IF NOT FOUND IN STATUS FILE<br>
               select server, yellow, red  from   pr_pop3_def where  id = '25'<br>
               IF NOT FOUND IN DEFINITION TABLE<br>
                  SKIP THIS PROBE<br>
                  probes without id (because they don't have database access) may be added here<br>
               ENDIF not in definition table<br>
            ENDIF not in status file<br>
            GET MOST RECENT PROBE RESULT TIME:<br>
            select stattime from pr_pop3_raw use index(probstat) where probe = '25' order by stattime desc limit 1<br>
         ENDIF not in cache<br>
         STORE RESULT:<br>
         insert into pr_pop3_raw set probe = '25', yellow = '1', red = '2', stattime = 'xxxxx', color = 'xx',  <br>
           connect = '1', total = '2', message = 'none'<br>
         IF CURRENT PROBE IS NEWER THEN ANY WE'VE SEEN SO FAR<br>
            copy previous record stattime from def record<br>
         ELSE<br>
            select   color, stattime from pr_pop3_raw use index(probstat) where probe = '25' and stattime &lt; 'xxxx'<br>
            order by stattime desc limit 1<br>
         ENDIF<br>
<br>
         IF THIS IS THE FIRST RESULT EVER SEEN FOR THIS PROBE<br>
            insert into pr_status set class = '8', probe = '25', stattime = 'xxx', expires = 'xxx', color = '200', <br>
               server = '2', message = 'none', yellow = '1', red = '2'<br>
         ELSE IF WE HAVE NOT SEEN THIS PROBE BEFORE<br>
            IF THE COLOR DIFFERS FROM THE PREVIOUS RECORD<br>
               CREATE HISTORY RECORD:<br>
               insert into pr_hist set server = '2', class = '8', probe = '25', stattime = 'xxx', prv_color = '500', color = '200', message = 'none'<br>
               RETRIEVE FOLLOWING RECORD:<br>
               select color, stattime from pr_pop3_raw use index(probstat) where probe = '25' and stattime &lt; 'xxxx' <br>
               order by stattime desc limit 1<br>
               IF FOUND AND HAS THE SAME COLOR DELETE ANY HISTORY RECORDS:<br>
                  delete from pr_hist where stattime = 'xxxx' and probe = '25' and class = '8'<br>
	          delete from pr_status where stattime = 'xxx' and probe = '25' and class = '8'<br>
               ENDIF following found and has same color<br>
               IF CURRENT RECORD IS THE NEWEST UPDATE STATUS AND SERVER STATUS<br>
                  update pr_status set stattime = 'xxx', expires = 'xxxy', color = '200', message = 'none', yellow = '1', red = '2' <br>
                  where probe = '25' and class = '8'<br>
                  update server set color = '20' where id = '2'<br>
               ENDIF newest<br>
            ENDIF color differs<br>
            IF CURRENT RAW RECORD IS THE MOST RECENT<br>
               FOR EACH PERIOD<br>
                  IF WE ENTERED A SLOT TIMESLOT IN THE PERIOD<br>
                     SUMMARIZE:<br>
                     select avg(connect), avg(total), max(color), avg(yellow), avg(red) from pr_pop3_day use index(probstat) <br>
                     where probe = '25' and stattime &gt;= slotlow and stattime &lt; slothigh<br>
                     insert into pr_pop3_week set connect = '1', total = '2', probe = 25, color = '200', stattime = slot, <br>
                        yellow = '1', red = '2', slot = '34'<br>
                  ENDIF<br>
               ENDFOR<br>
            ELSE<br>
              FOR EACH PERIOD<br>
                IF THE FIRST RECORD FOR THE NEXT SLOT HAS BEEN SEEN<br>
                   RE-SUMMARIZE CURRENT SLOT<br>
                   select avg(connect), avg(total), max(color), avg(yellow), avg(red) from pr_pop3_day use index(probstat) <br>
                   where probe = '25' and stattime &gt;= slotlow and stattime &lt; slothigh<br>
                   insert into pr_pop3_week set connect = '1', total = '2', probe = 25, color = '200', stattime = slot, yellow = '1', <br>
                      red = '2', slot = '34'<br>
                ENDIF<br>
            ENDIF<br>
         ENDIF<br>
      </p></div><p>
      </p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Scaling_up"></a>4.3. Scaling up</h2></div></div><p> Various parts of the system may need more resources. Luckily Upwatch is designed
           to scale up considerably. Of course it cannot scale infinately. The last bottleneck will
           probably be the database. Although MySQL is known for its speed, even that has its limits.
        </p><p> The probes may be scaled up, sometimes by giving them more filehandles, later by moving them to another host</p><p> The website may be scaled up by spreading it out across several hosts</p><p> The database may be scaled up by putting it on separate hardware, using faster CPU and
          more spindles (disks), and ultimately using MySQL mirrorring to divide reading and
          writing across separate machines, or spreading out the tables across multtiple machines. 
          MySQL has lots of info on increasing performance..</p></div></div><div class="appendix"><div class="titlepage"><div><h2 class="title"><a name="id2755043"></a>Appendix A. Interfaces and file layouts</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>A.1. <a href="#Probe_result_file">Probe result file</a></dt><dd><dl><dt>A.1.1. <a href="#id2755072">Probe file name</a></dt><dt>A.1.2. <a href="#id2755113">Generic probe file layout</a></dt><dt>A.1.3. <a href="#uw_accept_protocol">uw_accept protocol</a></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Probe_result_file"></a>A.1. Probe result file</h2></div></div><p> Every probe result is written in XML format into a queue file. This file will be picked up by the process
      emptying the queue, usually uw_send, or uw_process. The file must have a specific name,
      and a specific layout.
   </p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="id2755072"></a>A.1.1. Probe file name</h3></div></div><p> The name of the file is composed of the current epoch time in seconds, microseconds, process
           id, and hostname on which the queue resides, all separated by dots. An example would be:
       </p><div class="itemizedlist"><ul type="disc"><li><p>1031601982.341878.27470.ron-ibook.nbs.arts-betel.org</p></li></ul></div><p>From a shell you can generate such a name using <b>echo `date +%s`.500.$$.`hostname`</b></p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="id2755113"></a>A.1.2. Generic probe file layout</h3></div></div><p>The probe result file is in XML format, described in <tt>/usr/lib/upwatch/dtdt/result.dtd</tt>.
      </p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="uw_accept_protocol"></a>A.1.3. uw_accept protocol</h3></div></div><p>The protocol used by uw_accept is almost exactly like the POP3 protocol. login with USER and PASS, then
      enter DATA filesize and start uploading</p></div></div></div><div class="appendix"><div class="titlepage"><div><h2 class="title"><a name="Probe_specifications"></a>Appendix B. Probe specifications</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>B.1. <a href="#bb">bb - Big Brother generic probe</a></dt><dd><dl><dt>B.1.1. <a href="#bb_result_layout">bb result record layout</a></dt><dt>B.1.2. <a href="#bb_database_layout">bb database layout</a></dt></dl></dd><dt>B.2. <a href="#bb_cpu">bb_cpu - Big Brother System probe</a></dt><dd><dl><dt>B.2.1. <a href="#bb_cpu_result_layout">bb_cpu result record layout</a></dt><dt>B.2.2. <a href="#bb_cpu_database_layout">bb_cpu database layout</a></dt></dl></dd><dt>B.3. <a href="#httpget">httpget - Do a HTTP GET request</a></dt><dd><dl><dt>B.3.1. <a href="#httpget_result_layout">httpget result record layout</a></dt><dt>B.3.2. <a href="#httpget_database_layout">httpget database layout</a></dt></dl></dd><dt>B.4. <a href="#imap">imap - Test a IMAP server, optionally with user/password</a></dt><dd><dl><dt>B.4.1. <a href="#imap_result_layout">imap result record layout</a></dt><dt>B.4.2. <a href="#imap_database_layout">imap database layout</a></dt></dl></dd><dt>B.5. <a href="#iptraf">iptraf - Incoming and outgoing traffic to an IP adddress, network or interface</a></dt><dd><dl><dt>B.5.1. <a href="#iptraf_result_layout">iptraf result record layout</a></dt><dt>B.5.2. <a href="#iptraf_database_layout">iptraf database layout</a></dt></dl></dd><dt>B.6. <a href="#mssql">mssql - Do a Microsoft SQL Server query</a></dt><dd><dl><dt>B.6.1. <a href="#mssql_result_layout">mssql result record layout</a></dt><dt>B.6.2. <a href="#mssql_database_layout">mssql database layout</a></dt></dl></dd><dt>B.7. <a href="#mysql">mysql - Do a MySQL query</a></dt><dd><dl><dt>B.7.1. <a href="#mysql_result_layout">mysql result record layout</a></dt><dt>B.7.2. <a href="#mysql_database_layout">mysql database layout</a></dt></dl></dd><dt>B.8. <a href="#ping">ping - send ICMP echo requests</a></dt><dd><dl><dt>B.8.1. <a href="#ping_result_layout">ping result record layout</a></dt><dt>B.8.2. <a href="#ping_database_layout">ping database layout</a></dt></dl></dd><dt>B.9. <a href="#pop3">pop3 - Test a POP3 server, optionally with user/password</a></dt><dd><dl><dt>B.9.1. <a href="#pop3_result_layout">pop3 result record layout</a></dt><dt>B.9.2. <a href="#pop3_database_layout">pop3 database layout</a></dt></dl></dd><dt>B.10. <a href="#postgresql">postgresql - Do a PostgreSQL query</a></dt><dd><dl><dt>B.10.1. <a href="#postgresql_result_layout">postgresql result record layout</a></dt><dt>B.10.2. <a href="#postgresql_database_layout">postgresql database layout</a></dt></dl></dd><dt>B.11. <a href="#snmpget">snmpget - Query an SNMP variable using an SNMP GET</a></dt><dd><dl><dt>B.11.1. <a href="#snmpget_result_layout">snmpget result record layout</a></dt><dt>B.11.2. <a href="#snmpget_database_layout">snmpget database layout</a></dt></dl></dd><dt>B.12. <a href="#sysstat">sysstat - System information like load average, CPU/MEM usage etc</a></dt><dd><dl><dt>B.12.1. <a href="#sysstat_result_layout">sysstat result record layout</a></dt><dt>B.12.2. <a href="#sysstat_database_layout">sysstat database layout</a></dt></dl></dd><dt>B.13. <a href="#errlog">errlog - System error log analysis</a></dt><dd><dl><dt>B.13.1. <a href="#errlog_result_layout">errlog result record layout</a></dt><dt>B.13.2. <a href="#errlog_database_layout">errlog database layout</a></dt></dl></dd><dt>B.14. <a href="#diskfree">diskfree - Free disk space</a></dt><dd><dl><dt>B.14.1. <a href="#diskfree_result_layout">diskfree result record layout</a></dt><dt>B.14.2. <a href="#diskfree_database_layout">diskfree database layout</a></dt></dl></dd></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="bb"></a>B.1. bb - Big Brother generic probe</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="bb_result_layout"></a>B.1.1. bb result record layout</h3></div></div><div class="table"><p class="title"><b>Table bb attributes. bb attributes</b></p><table summary="bb attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>host </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>host where this element originated </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table bb elements. bb elements</b></p><table summary="bb elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="bb_database_layout"></a>B.1.2. bb database layout</h3></div></div><div class="table"><p class="title"><b>Table bb definition record layout. bb definition record layout</b></p><table summary="bb definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>bbname </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Big Brother name of this probe </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table bb result record layout. bb result record layout</b></p><table summary="bb result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="bb_cpu"></a>B.2. bb_cpu - Big Brother System probe</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="bb_cpu_result_layout"></a>B.2.1. bb_cpu result record layout</h3></div></div><div class="table"><p class="title"><b>Table bb_cpu attributes. bb_cpu attributes</b></p><table summary="bb_cpu attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>host </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>host where this element originated </p></td></tr><tr><td><p>loadavg </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Load average as computed by upwatch </p></td></tr><tr><td><p>user </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>CPU user time </p></td></tr><tr><td><p>system </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>CPU system time </p></td></tr><tr><td><p>idle </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>CPU idle time </p></td></tr><tr><td><p>swapped </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of blocks written to swap device </p></td></tr><tr><td><p>free </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Free memory </p></td></tr><tr><td><p>buffered </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of memory used for OS buffers </p></td></tr><tr><td><p>cached </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of memory used for disk buffers </p></td></tr><tr><td><p>used </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of memory used by processes </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table bb_cpu elements. bb_cpu elements</b></p><table summary="bb_cpu elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="bb_cpu_database_layout"></a>B.2.2. bb_cpu database layout</h3></div></div><div class="table"><p class="title"><b>Table bb_cpu definition record layout. bb_cpu definition record layout</b></p><table summary="bb_cpu definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table bb_cpu result record layout. bb_cpu result record layout</b></p><table summary="bb_cpu result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>loadavg </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Load average as computed by upwatch </p></td></tr><tr><td><p>user </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>CPU user time </p></td></tr><tr><td><p>system </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>CPU system time </p></td></tr><tr><td><p>idle </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>CPU idle time </p></td></tr><tr><td><p>swapped </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of blocks written to swap device </p></td></tr><tr><td><p>free </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Free memory </p></td></tr><tr><td><p>buffered </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of memory used for OS buffers </p></td></tr><tr><td><p>cached </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of memory used for disk buffers </p></td></tr><tr><td><p>used </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of memory used by processes </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="httpget"></a>B.3. httpget - Do a HTTP GET request</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="httpget_result_layout"></a>B.3.1. httpget result record layout</h3></div></div><div class="table"><p class="title"><b>Table httpget attributes. httpget attributes</b></p><table summary="httpget attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>lookup </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time needed for DNS lookup </p></td></tr><tr><td><p>connect </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>pretransfer </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for any pre-transfer actions </p></td></tr><tr><td><p>total </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table httpget elements. httpget elements</b></p><table summary="httpget elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="httpget_database_layout"></a>B.3.2. httpget database layout</h3></div></div><div class="table"><p class="title"><b>Table httpget definition record layout. httpget definition record layout</b></p><table summary="httpget definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>hostname </p></td><td><p>varchar(80) </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Hostname for the HTTP request </p></td></tr><tr><td><p>uri </p></td><td><p>varchar(255) </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>URI part </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table httpget result record layout. httpget result record layout</b></p><table summary="httpget result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>lookup </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time needed for DNS lookup </p></td></tr><tr><td><p>connect </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>pretransfer </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for any pre-transfer actions </p></td></tr><tr><td><p>total </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="imap"></a>B.4. imap - Test a IMAP server, optionally with user/password</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="imap_result_layout"></a>B.4.1. imap result record layout</h3></div></div><div class="table"><p class="title"><b>Table imap attributes. imap attributes</b></p><table summary="imap attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>connect </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table imap elements. imap elements</b></p><table summary="imap elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="imap_database_layout"></a>B.4.2. imap database layout</h3></div></div><div class="table"><p class="title"><b>Table imap definition record layout. imap definition record layout</b></p><table summary="imap definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>username </p></td><td><p>varchar(64) </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Username </p></td></tr><tr><td><p>password </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Password </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table imap result record layout. imap result record layout</b></p><table summary="imap result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>connect </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="iptraf"></a>B.5. iptraf - Incoming and outgoing traffic to an IP adddress, network or interface</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="iptraf_result_layout"></a>B.5.1. iptraf result record layout</h3></div></div><div class="table"><p class="title"><b>Table iptraf attributes. iptraf attributes</b></p><table summary="iptraf attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>incoming </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total incoming bytes </p></td></tr><tr><td><p>outgoing </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total outgoing bytes </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table iptraf elements. iptraf elements</b></p><table summary="iptraf elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr><tr><td><p>interval </p></td><td><p>NO </p></td><td><p>time between measurements </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="iptraf_database_layout"></a>B.5.2. iptraf database layout</h3></div></div><div class="table"><p class="title"><b>Table iptraf definition record layout. iptraf definition record layout</b></p><table summary="iptraf definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>300 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>500 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table iptraf result record layout. iptraf result record layout</b></p><table summary="iptraf result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>300 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>500 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>incoming </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total incoming bytes </p></td></tr><tr><td><p>outgoing </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total outgoing bytes </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="mssql"></a>B.6. mssql - Do a Microsoft SQL Server query</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="mssql_result_layout"></a>B.6.1. mssql result record layout</h3></div></div><div class="table"><p class="title"><b>Table mssql attributes. mssql attributes</b></p><table summary="mssql attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>connect </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table mssql elements. mssql elements</b></p><table summary="mssql elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="mssql_database_layout"></a>B.6.2. mssql database layout</h3></div></div><div class="table"><p class="title"><b>Table mssql definition record layout. mssql definition record layout</b></p><table summary="mssql definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.5 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.8 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>dbname </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Name of the database for the query </p></td></tr><tr><td><p>dbuser </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Database user </p></td></tr><tr><td><p>dbpasswd </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Database password </p></td></tr><tr><td><p>query </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Query to perform. This should return at least 1 row </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table mssql result record layout. mssql result record layout</b></p><table summary="mssql result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.5 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.8 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>connect </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="mysql"></a>B.7. mysql - Do a MySQL query</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="mysql_result_layout"></a>B.7.1. mysql result record layout</h3></div></div><div class="table"><p class="title"><b>Table mysql attributes. mysql attributes</b></p><table summary="mysql attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>connect </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table mysql elements. mysql elements</b></p><table summary="mysql elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="mysql_database_layout"></a>B.7.2. mysql database layout</h3></div></div><div class="table"><p class="title"><b>Table mysql definition record layout. mysql definition record layout</b></p><table summary="mysql definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>dbname </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Name of the database for the query </p></td></tr><tr><td><p>dbuser </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Database user </p></td></tr><tr><td><p>dbpasswd </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Database password </p></td></tr><tr><td><p>query </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Query to perform. This should return at least 1 row </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table mysql result record layout. mysql result record layout</b></p><table summary="mysql result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0.5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>connect </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="ping"></a>B.8. ping - send ICMP echo requests</h2></div></div><p>Five ICMP echo requests are sent. For each request the time is measured 
between the echo and the resulting ICMP reply packet.</p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="ping_result_layout"></a>B.8.1. ping result record layout</h3></div></div><div class="table"><p class="title"><b>Table ping attributes. ping attributes</b></p><table summary="ping attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>value </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Average turn-around time </p></td></tr><tr><td><p>lowest </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>lowest turn-around time </p></td></tr><tr><td><p>highest </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>highest turn-around time </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table ping elements. ping elements</b></p><table summary="ping elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="ping_database_layout"></a>B.8.2. ping database layout</h3></div></div><div class="table"><p class="title"><b>Table ping definition record layout. ping definition record layout</b></p><table summary="ping definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>count </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>Number of ping packets to send </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table ping result record layout. ping result record layout</b></p><table summary="ping result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>value </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Average turn-around time </p></td></tr><tr><td><p>lowest </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>lowest turn-around time </p></td></tr><tr><td><p>highest </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>highest turn-around time </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="pop3"></a>B.9. pop3 - Test a POP3 server, optionally with user/password</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="pop3_result_layout"></a>B.9.1. pop3 result record layout</h3></div></div><div class="table"><p class="title"><b>Table pop3 attributes. pop3 attributes</b></p><table summary="pop3 attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>connect </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table pop3 elements. pop3 elements</b></p><table summary="pop3 elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="pop3_database_layout"></a>B.9.2. pop3 database layout</h3></div></div><div class="table"><p class="title"><b>Table pop3 definition record layout. pop3 definition record layout</b></p><table summary="pop3 definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>username </p></td><td><p>varchar(64) </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Username </p></td></tr><tr><td><p>password </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Password </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table pop3 result record layout. pop3 result record layout</b></p><table summary="pop3 result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>connect </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="postgresql"></a>B.10. postgresql - Do a PostgreSQL query</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="postgresql_result_layout"></a>B.10.1. postgresql result record layout</h3></div></div><div class="table"><p class="title"><b>Table postgresql attributes. postgresql attributes</b></p><table summary="postgresql attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>connect </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table postgresql elements. postgresql elements</b></p><table summary="postgresql elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="postgresql_database_layout"></a>B.10.2. postgresql database layout</h3></div></div><div class="table"><p class="title"><b>Table postgresql definition record layout. postgresql definition record layout</b></p><table summary="postgresql definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>dbname </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Name of the database for the query </p></td></tr><tr><td><p>dbuser </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Database user </p></td></tr><tr><td><p>dbpasswd </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Database password </p></td></tr><tr><td><p>query </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Query to perform. This should return at least 1 row </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table postgresql result record layout. postgresql result record layout</b></p><table summary="postgresql result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>connect </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time for connection to complete </p></td></tr><tr><td><p>total </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>total time needed </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="snmpget"></a>B.11. snmpget - Query an SNMP variable using an SNMP GET</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="snmpget_result_layout"></a>B.11.1. snmpget result record layout</h3></div></div><div class="table"><p class="title"><b>Table snmpget attributes. snmpget attributes</b></p><table summary="snmpget attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>value </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Value of OID queried </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table snmpget elements. snmpget elements</b></p><table summary="snmpget elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>NO </p></td><td><p>id of this probe in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="snmpget_database_layout"></a>B.11.2. snmpget database layout</h3></div></div><div class="table"><p class="title"><b>Table snmpget definition record layout. snmpget definition record layout</b></p><table summary="snmpget definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr><tr><td><p>community </p></td><td><p>char </p></td><td><p>NO </p></td><td><p>public </p></td><td><p> </p></td><td><p>community string for SNMPv1/v2c transactions </p></td></tr><tr><td><p>OID </p></td><td><p>varchar(255) </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Object ID </p></td></tr><tr><td><p>dispname </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Display Name </p></td></tr><tr><td><p>dispunit </p></td><td><p>char </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>Display Unit </p></td></tr><tr><td><p>multiplier </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>Multiplier for result values </p></td></tr><tr><td><p>mode </p></td><td class="auto-generated"> </td><td><p>NO </p></td><td><p>absolute </p></td><td><p> </p></td><td><p>plot absolute or relative values </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table snmpget result record layout. snmpget result record layout</b></p><table summary="snmpget result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>value </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Value of OID queried </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="sysstat"></a>B.12. sysstat - System information like load average, CPU/MEM usage etc</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="sysstat_result_layout"></a>B.12.1. sysstat result record layout</h3></div></div><div class="table"><p class="title"><b>Table sysstat attributes. sysstat attributes</b></p><table summary="sysstat attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>loadavg </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>The load average as reported by the system </p></td></tr><tr><td><p>user </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>CPU user time </p></td></tr><tr><td><p>system </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>CPU system time </p></td></tr><tr><td><p>idle </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>CPU idle time </p></td></tr><tr><td><p>swapin </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of blocks swapped in from disk </p></td></tr><tr><td><p>swapout </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of blocks swapped out to disk </p></td></tr><tr><td><p>blockin </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of blocks read from block devices </p></td></tr><tr><td><p>blockout </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of blocks written to block devices </p></td></tr><tr><td><p>swapped </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of blocks written to swap device </p></td></tr><tr><td><p>free </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Free memory </p></td></tr><tr><td><p>buffered </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of memory used for OS buffers </p></td></tr><tr><td><p>cached </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of memory used for disk buffers </p></td></tr><tr><td><p>used </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>Amount of memory used by processes </p></td></tr><tr><td><p>systemp </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>System temperature in Celsius </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table sysstat elements. sysstat elements</b></p><table summary="sysstat elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>server </p></td><td><p>NO </p></td><td><p>id of this server in the database </p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="sysstat_database_layout"></a>B.12.2. sysstat database layout</h3></div></div><div class="table"><p class="title"><b>Table sysstat definition record layout. sysstat definition record layout</b></p><table summary="sysstat definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table sysstat result record layout. sysstat result record layout</b></p><table summary="sysstat result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>3 </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>5 </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr><tr><td><p>loadavg </p></td><td><p>float </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>The load average as reported by the system </p></td></tr><tr><td><p>user </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>CPU user time </p></td></tr><tr><td><p>system </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>CPU system time </p></td></tr><tr><td><p>idle </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>CPU idle time </p></td></tr><tr><td><p>swapin </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of blocks swapped in from disk </p></td></tr><tr><td><p>swapout </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of blocks swapped out to disk </p></td></tr><tr><td><p>blockin </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of blocks read from block devices </p></td></tr><tr><td><p>blockout </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of blocks written to block devices </p></td></tr><tr><td><p>swapped </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of blocks written to swap device </p></td></tr><tr><td><p>free </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Free memory </p></td></tr><tr><td><p>buffered </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of memory used for OS buffers </p></td></tr><tr><td><p>cached </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of memory used for disk buffers </p></td></tr><tr><td><p>used </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>Amount of memory used by processes </p></td></tr><tr><td><p>systemp </p></td><td><p>tinyint </p></td><td><p>NO </p></td><td><p>0 </p></td><td><p> </p></td><td><p>System temperature in Celsius </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="errlog"></a>B.13. errlog - System error log analysis</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="errlog_result_layout"></a>B.13.1. errlog result record layout</h3></div></div><div class="table"><p class="title"><b>Table errlog attributes. errlog attributes</b></p><table summary="errlog attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>host </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>host where this element originated </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table errlog elements. errlog elements</b></p><table summary="errlog elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="errlog_database_layout"></a>B.13.2. errlog database layout</h3></div></div><div class="table"><p class="title"><b>Table errlog definition record layout. errlog definition record layout</b></p><table summary="errlog definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table errlog result record layout. errlog result record layout</b></p><table summary="errlog result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr></tbody></table></div><p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="diskfree"></a>B.14. diskfree - Free disk space</h2></div></div><p><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="diskfree_result_layout"></a>B.14.1. diskfree result record layout</h3></div></div><div class="table"><p class="title"><b>Table diskfree attributes. diskfree attributes</b></p><table summary="diskfree attributes" width="100%" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Type </p></td><td><p>Required</p></td><td><p>Default </p></td><td><p>Description</p></td></tr><tr><td><p>host </p></td><td><p>NMTOKEN </p></td><td><p>NO </p></td><td><p> </p></td><td><p>host where this element originated </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table diskfree elements. diskfree elements</b></p><table summary="diskfree elements" width="100%" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><p>Name</p></td><td><p>Optional</p></td><td><p>Description</p></td></tr><tr><td><p>ipaddress </p></td><td><p>NO </p></td><td><p>target ip address </p></td></tr><tr><td><p>date </p></td><td><p>NO </p></td><td><p>date/time for this result </p></td></tr><tr><td><p>expires </p></td><td><p>NO </p></td><td><p>when this result expires </p></td></tr><tr><td><p>color </p></td><td><p>NO </p></td><td><p>color as this probe thinks it should be </p></td></tr><tr><td><p>received </p></td><td><p>NO </p></td><td><p>date/time this result was received by the upwatch server </p></td></tr></tbody></table></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="diskfree_database_layout"></a>B.14.2. diskfree database layout</h3></div></div><div class="table"><p class="title"><b>Table diskfree definition record layout. diskfree definition record layout</b></p><table summary="diskfree definition record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>int </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>probe unique numerical id </p></td></tr><tr><td><p>pgroup </p></td><td><p>int unsigned </p></td><td><p>NO </p></td><td><p>2 </p></td><td><p> </p></td><td><p>group id </p></td></tr><tr><td><p>server </p></td><td><p>int </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>server id </p></td></tr><tr><td><p>contact </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>user field: pointer to contact database </p></td></tr><tr><td><p>notify </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>notifier id</p></td></tr><tr><td><p>ipaddress </p></td><td><p>varchar(15) </p></td><td><p>YES </p></td><td><p> </p></td><td><p> </p></td><td><p>target ipaddress </p></td></tr><tr><td><p>description </p></td><td><p>text </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>description </p></td></tr><tr><td><p>freq </p></td><td><p>smallint unsigned </p></td><td><p>NO </p></td><td><p>1 </p></td><td><p> </p></td><td><p>frequency in minutes </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>disable </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>disable this probe </p></td></tr><tr><td><p>hide </p></td><td><p>enum('yes', 'no') </p></td><td><p>NO </p></td><td><p>no </p></td><td><p> </p></td><td><p>hide probe results from viewing </p></td></tr></tbody></table></div><div class="table"><p class="title"><b>Table diskfree result record layout. diskfree result record layout</b></p><table summary="diskfree result record layout" width="100%" border="1"><colgroup><col><col><col><col><col><col></colgroup><tbody><tr><td><p>Field </p></td><td><p>Type </p></td><td><p>Key </p></td><td><p>Default </p></td><td><p>Extra </p></td><td><p>Description</p></td></tr><tr><td><p>id </p></td><td><p>bigint unsigned </p></td><td><p>PRI </p></td><td><p> </p></td><td><p>auto_increment </p></td><td><p>unique id for result </p></td></tr><tr><td><p>probe </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>1 </p></td><td><p> </p></td><td><p>probe identifier </p></td></tr><tr><td><p>yellow </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for yellow alert </p></td></tr><tr><td><p>red </p></td><td><p>float </p></td><td><p>NO </p></td><td><p> </p></td><td><p> </p></td><td><p>value for red alert </p></td></tr><tr><td><p>stattime </p></td><td><p>int unsigned </p></td><td><p>YES </p></td><td><p>0 </p></td><td><p> </p></td><td><p>time when result was generated</p></td></tr><tr><td><p>color </p></td><td><p>smallint unsigned </p></td><td><p>YES </p></td><td><p>200 </p></td><td><p> </p></td><td><p>color value </p></td></tr></tbody></table></div><p></div></div></div><div class="appendix"><div class="titlepage"><div><h2 class="title"><a name="Adding_a_probe"></a>Appendix C. Adding a probe</h2></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>C.1. <a href="#So_you_want_to_add_a_probe">So you want to add a probe?</a></dt><dt>C.2. <a href="#Adding_probe_Basic_Steps">Basic steps for adding a probe</a></dt><dd><dl><dt>C.2.1. <a href="#Think_carefully_befire_you_start">Think carefully before you start</a></dt><dt>C.2.2. <a href="#Pick_a_name">Pick a real good name</a></dt><dt>C.2.3. <a href="#Design_the_database_fields">Design the Database Fields</a></dt><dt>C.2.4. <a href="#write_the_code">Write the code</a></dt><dt>C.2.5. <a href="#Write_the_uw_process_extension">Write the uw_process extension</a></dt><dt>C.2.6. <a href="#Add_PHP_pages_to_CMS">Add PHP pages_to_CMS</a></dt><dt>C.2.7. <a href="#Write_documentatrion">Write documentation</a></dt></dl></dd><dt>C.3. <a href="#Non_standard_probes">Non-standard Probes</a></dt></dl></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="So_you_want_to_add_a_probe"></a>C.1. So you want to add a probe?</h2></div></div><p> Are you really sure? Adding a probe involves writing C code, creating and designing database
          tables and queue result files, creating PHP pages, and PHP graphs, writing documentation and submitting
          these changes to CVS. It is a lot of work, how rewarding it may be. </p><p> In the following overview we'll show you how to add a probe. All man-pages, spec-files, documentation
          will be auto-generated if you follow instructions below.</p></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Adding_probe_Basic_Steps"></a>C.2. Basic steps for adding a probe</h2></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Think_carefully_befire_you_start"></a>C.2.1. Think carefully before you start</h3></div></div><p> You should not think lightly of adding a probe. Think things over before you start. Isn't there a
             probe available you can use? Or maybe you can get away with extending an existing one? If not,
             perhaps you can copy and modify one? </p><p> If not, you're in for the rewarding process of adding a new probe. Go to the next step.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Pick_a_name"></a>C.2.2. Pick a real good name</h3></div></div><p> You should think of a real good descriptive name for your probe. It should describe
             exactly what it does. Leave room for future probes that do something similar, also think about
             future extension to the probe itself.. Don't be satisfied too soon. For the rest of this small tutorial, we'll
             assume you probe willed be called <tt>cputemp</tt> for monitoring the host CPU
             temperature (which in fact already exists as part of the <tt>sysstat</tt> probe).</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Design_the_database_fields"></a>C.2.3. Design the Database Fields</h3></div></div><p><p> Also a probe needs to enter its status into pr_status, and its history into pr_history and you should
             add code for this in the uw_process part..</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="write_the_code"></a>C.2.4. Write the code</h3></div></div><p> Create a new directory named <tt>uw_cputemp</tt>, copy all files in
             <tt>templates/probe</tt> to it. Look into
             those files, do a search and replace all occurrences of <tt>template</tt> with
             <tt>cputemp</tt>. Go one
             directory up, edit <tt>configure.in</tt>. Add a line <tt>uw_cputemp/Makefile</tt>
              to the  <tt>AC_CONFIG_FILES</tt> section. Add <tt>uw_cputemp</tt> to the
             <tt>PROGNAMES</tt> variable in <tt>Makefile.am</tt>. Run:
          </p><div class="literallayout"><p><br>
                $ ./autogen.sh<br>
                $ ./configure<br>
                $ cd uw_cputemp<br>
                $ make clean<br>
                $ make<br>
          </p></div><p> No errors should show up.
          </p><p> Now start coding in <tt>uw_cputemp/run.c</tt>, specifically in the function
             <tt>run()</tt>. You should have enough examples in the other probes. Basically the
             probe should read a list of probedefinitions from a database, execute all probes, and writes the
             results into a spoolfile. There are utility functions for doing this in libupwatch.
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Test your code thoroughly for memory leaks and error conditions.</p></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Write_the_uw_process_extension"></a>C.2.5. Write the <tt>uw_process</tt> extension</h3></div></div><p> The output of your probe is processed by <tt>uw_process</tt>. You should
            add a new source file called <tt>process_cputemp.c</tt>, that reads the probe results
            and writes them to the database tables. Be careful for the logic in this part. Add an entry in the
            <tt>struct _probe_proc</tt> array in <tt>uw_process/run.c</tt>, and
            a <tt>extern int process_cputemp(char *spec, GString *remark);</tt> just above it.
          </p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Add_PHP_pages_to_CMS"></a>C.2.6. Add PHP pages_to_CMS</h3></div></div><div class="itemizedlist"><ul type="disc"><li><p>Copy all <tt>*.php</tt> files from <tt>templates/php-cms</tt>
                   to the <tt>en/database </tt>directory. Rename every
                   *template* file to *cputemp*.
                </p></li><li><p>Copy the <tt>pr_template_def.rec</tt> file to
                   <tt>/home/cms/home/cms/www/php/cms</tt>.
                   Do the usual replace, and take care this def file reflects the layout of <tt>pr_cputemp_def</tt>
                   table in the database.
                </p></li><li><p> Go to <tt>www/php/cms/custforms.php</tt>. Find the line which says
                   <span class="emphasis"><em>START OF PROBES</em></span>. Add an entry to the <tt>$f_probes</tt> array.
                </p></li><li><p> Copy a section of another probe. Adapt as needed.
                </p></li><li><p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>Create an empty record in the database with id = 1i</p></div></li></ul></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="Write_documentatrion"></a>C.2.7. Write documentation</h3></div></div><p> Note that every probe is documented briefly in the <tt>cmd_options.def</tt> file.
             You should also document the probe in this manual. Personally I use KDE's Kate
             with the XML plugin. Go the the <tt>doc</tt> directory.
             Copy <tt>template-specs.xml</tt> to <tt>cputemp-specs.xml</tt>. Add a line
             to <tt>probesspecs.xml</tt>, and an ENTITY line at the top of <tt>upwatch.xml</tt>.
             Add <tt>cputemp-specs.xml</tt> to the <tt>XMLFILES</tt> line in
             <tt>Makefile.am</tt>. Rerun ./autogen.sh,
             ./configure in the top directory. Run make in
             the doc directory.
          </p></div></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="Non_standard_probes"></a>C.3. Non-standard Probes</h2></div></div><p>To be done</p></div></div><div class="index"><div class="titlepage"><div><h2 class="title"><a name="id2756020"></a>Index</h2></div></div><div class="index"></div></div></div></body></html>
